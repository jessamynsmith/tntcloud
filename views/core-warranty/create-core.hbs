<!--
<h1>Create Core</h1>
<section class="insert">
    <h3>Create Core</h3>
    <form action="/create-core/insert-core" method="post">
        <div class="input">
            <label for="title">Title</label>
            <input type="text" id="title" name="title">
        </div>
        <div class="input">
            <label for="content">Content</label>
            <input type="text" id="content" name="content">
        </div>
        <div class="input">
            <label for="author">Author</label>
            <input type="text" id="author" name="author">
        </div>
        <button type="submit">INSERT</button>
    </form>
</section>
<!----------------------------------------------------------------------------->
<!----------------------------------------------------------------------------->
<!----------------------------------------------------------------------------->
<!----------------------------------------------------------------------------->

<!-- Title/Intro -------------------------------------------------------------->
<div class="section-intro">
  <h1>Create Core Record</h1>
</div>

<!-- Main --------------------------------------------------------------------->
<div class="row expanded small-12 medium-10 large-6 columns">
  <form action="/create-core/insert-core" method="post" class="input-form">
    <div class="">
      <div class="card">
        <div class="card-divider">
          <h4>Create Core Record</h4>
        </div>
      </div>
      <div class="input-group">
        <span class="input-group-label">Branch</span>
        <select id="core-branch" required class="input-group-field">
          <option value="">Select Branch</option>
          <option value="JAX" name="JAX">JAX</option>
          <option value="NFWS" name="NFWS">NFWS</option>
          <option value="LC" name="LC">LC</option>
          <option value="WC" name="WC">WC</option>
          <option value="440" name="440">440</option>
        </select>
      </div>
      <div class="input-group">
        <span class="input-group-label">Turned In By</span>
        <select id="turned-in-by" class="input-group-field">
          <option value="">Select Name</option>
        </select>
      </div>
      <div class="input-group">
        <span class="input-group-label">Received By</span>
        <select id="received-by"  class="input-group-field">
          <option value="">Select Name</option>
        </select>
      </div>
      <div class="input-group">
        <span class="input-group-label">R/O or Invoice#</span>
        <input type="text" id="core-ro" placeholder="R/O" required class="input-group-field" name="ro">
      </div>
      <div class="input-group">
        <span class="input-group-label">Customer</span>
        <input type="text" id="core-customer" placeholder="Customer" required class="input-group-field" name="customer">
      </div>
      <div class="input-group">
        <span class="input-group-label">Failed Part Number</span>
        <input type="text" id="core-failed-part-number" placeholder="Failed Part Number" required class="input-group-field" name="failedPartNumber">
      </div>
      <div class="input-group">
        <span class="input-group-label">Quantity</span>
        <select id="quantity" class="input-group-field">
        </select>
      </div>
      <div>
        <div class="input-group-label input-group-field" style="text-align: left;">Description</div>
        <textarea id="core-description" placeholder="Description" required name="description"></textarea>
        <input id="submit-core" type="submit" class="button primary">
        <a href="list-core.html" class="button secondary">Cancel</a>
      </div>
    </div>
  </form>
</div>

<script>

/*******************************************************************************
 * Post form Data to Database
*******************************************************************************/

function submitCoreForm(){
  event.preventDefault();
  // Get input field values
  // Server Date/Time https://firebase.google.com/docs/reference/js/firebase.database.ServerValue
  const DateTimeStampServer = firebase.database.ServerValue.TIMESTAMP;
  let Date = DateTimeStampServer;
  Date = moment().format('L'); // Format date with moment.js
  let DateTime = moment().format('h:mm:ss A');
  ////////////////////////////////////////////////////////////////////////////
  // Form Element Options and Values /////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////
  let Branch = document.getElementById('core-branch').value;
  // People //////////////////////////////////////////////////////////////////
  var selectTurnedInByChoose = document.getElementById("turned-in-by").value;
  var selectTurnedInBy = document.getElementById("turned-in-by");
  var TurnedInBy = selectTurnedInBy.options[selectTurnedInBy.selectedIndex].text;
  var selectReceivedByChoose = document.getElementById("received-by").value;
  var selectReceivedBy = document.getElementById("received-by");
  var ReceivedBy = selectReceivedBy.options[selectReceivedBy.selectedIndex].text;
  // End People //////////////////////////////////////////////////////////////
  let RO = document.getElementById('core-ro').value;
  let Customer = document.getElementById('core-customer').value;
  let FailedPartNumber = document.getElementById('core-failed-part-number').value;
  let Quantity = document.getElementById('quantity').value;
  let Description = document.getElementById('core-description').value;

  // A core entry
  var coreData = {
    DateTimeStampServer,
    Date,
    DateTime,
    Branch,
    TurnedInBy,
    ReceivedBy,
    RO,
    Customer,
    FailedPartNumber,
    Quantity,
    Description
  }

  // Get a key for a new core Record
  var newCoreKey = firebase.database().ref().child('core').push().key;

  // write the new core data to the core list
  var updates = {};
  updates['/core/' + newCoreKey] = coreData;

  // update the new-key-record with the data
  var dbUpdate = firebase.database().ref().update(updates);

  // redirect page with url parameter containing core key
  window.location.href = `track-print-core.html?KEY=${newCoreKey}`;

}; // End submitCoreForm Function

// console.log(firebase);

</script>

<!-- Select Options --------------------------------------------------------->
<script src="/javascripts/track-create-option-name.js"></script>
<script src="/javascripts/core-warranty/create-option-quantity.js"></script>
